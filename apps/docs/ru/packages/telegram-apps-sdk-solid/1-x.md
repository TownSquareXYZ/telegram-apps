---
outline:
  - 2
  - 3
---

# @telegram-apps/sdk-solid

<p style="display: inline-flex; gap: 8px">
  <a href="https://npmjs.com/package/@telegram-apps/sdk-solid">
    <img src="https://img.shields.io/npm/v/@telegram-apps/sdk-solid?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/sdk-solid"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/sdk-solid">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

Привязки Solid JS для [клиентского SDK](../telegram-apps-sdk/1-x). Включает хуки, компоненты и утилиты для комфортного использования Solid JS на платформе мини-приложений Telegram.

## Установка

Прежде всего, предполагается, что вы уже установили пакет `solid-js`, поскольку он является зависимым от этого пакета.

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/sdk-solid
```

```bash [npm]
npm i @telegram-apps/sdk-solid
```

```bash [yarn]
yarn add @telegram-apps/sdk-solid
```

:::

## SDKProvider

SDKProvider - это компонент, отвечающий за обеспечение функциональности SDK. Он принимает такие свойства, как `acceptCustomStyles: boolean` и `debug: boolean`. Оба они являются необязательными.

Свойство `acceptCustomStyles` отвечает за принятие пользовательских стилей из веб-версии Telegram.

Свойство `debug` отвечает за включение режима отладки.

```jsx
import { SDKProvider } from '@telegram-apps/sdk-solid';

/**
 * Корневой компонент для всего проекта.
 */
export function Root() {
  return (
    <SDKProvider acceptCustomStyles debug>
      <div>My application!</div>
    </SDKProvider>
  );
}
```

## Хуки

Каждый хук компонента в этом пакете возвращает пользовательский сигнал. Возвращаемый сигнал содержит свойство `error?: unknown`, которое будет установлено, если что-то пойдет не так во время инициализации компонента. Вызов сигнала, содержащего это свойство, приведет к выдаче соответствующей ошибки. Если ошибки не произойдет, сигнал вернет экземпляр компонента.

Для лучшего понимания, каждый хук компонента использует собственную функцию инициализации, связанную с компонентом. Если функция инициализации возвращает не промисное значение, хук немедленно получит его. Если функция инициализации асинхронна, хук вернет сигнал со значением `undefined`, пока компонент все еще инициализируется. Затем он будет обновлен до инициализированного значения.

Вот пример:

```ts
import { useBackButton, useViewport } from '@telegram-apps/sdk-solid';

// BackButton инициализируется синхронно. Поэтому bb будет сигналом,
// возвращающим экземпляр BackButton.
const bb = useBackButton();
const bbV = bb(); // will be BackButton

// Область просмотра асинхронно инициализируется, поэтому сигнал может вернуть undefined.
// Через некоторое время он получит действительное значение.
const vp = useViewport();
const vpV = vp(); // will be undefined

// ...через некоторое время
const vpV2 = vp(); // будет окно просмотра
```

Важно отметить, что все свойства компонентов реактивны. Поэтому, если что-то изменится в значении, возвращаемом сигналом-хуком, сам сигнал не будет уведомлен. Это связано с тем, что сам компонент не изменился, но изменилось его свойство.

Давайте рассмотрим этот пример:

```ts
import { useViewport } from '@telegram-apps/sdk-solid';
import { createEffect } from 'solid-js';

// Предположим, что область просмотра уже инициализирована.
const vp = useViewport();

createEffect(() => {
  // Эта строка кода не будет вызвана, если высота области просмотра 
  // или состояние расширения изменятся.
  console.log('Viewport changed', vp());
});

createEffect(() => {
  // Но эта строка кода будет вызываться каждый раз, когда высота области просмотра
  // изменится.
  console.log('Viewport height changed', vp().height);
});
```

У нас есть эта гранулярная реактивность для обеспечения максимальной производительности, как и у самого Solid.

## Хоки

Все компоненты высшего порядка пакета используют описанные ранее хуки. Использование довольно простое:

```ts
import { withBackButton } from '@telegram-apps/sdk-solid';

const MyComponent = withBackButton('bb', (props) => {
  createEffect(() => {
    props.bb().show();
  });
  return null;
});
```

Как первый аргумент вы должны передать значение, отвечающее за получение имени свойства компонента результатом хука. Обратите внимание, что полученное значение будет сигналом, а не значением, стоящим за ним.

## Список хуков и хоков

| Хоки                 | Хок                   | Значение сигнала                                                                                            |
| -------------------- | --------------------- | ----------------------------------------------------------------------------------------------------------- |
| `useBackButton`      | `withBackButton`      | [BackButton](../telegram-apps-sdk/1-x/components/back-button.md)                                            |
| `useBiometryManager` | `withBiometryManager` | [BiometryManager](../telegram-apps-sdk/1-x/components/biometry-manager.md) или `undefined`. |
| `useClosingBehavior` | `withClosingBehavior` | [ClosingBehavior](../telegram-apps-sdk/1-x/components/closing-behavior.md)                                  |
| `useCloudStorage`    | `withCloudStorage`    | [CloudStorage](../telegram-apps-sdk/1-x/components/cloud-storage.md)                                        |
| `useHapticFeedback`  | `withHapticFeedback`  | [HapticFeedback](../telegram-apps-sdk/1-x/components/haptic-feedback.md)                                    |
| `useInitData`        | `withInitData`        | [InitData](../telegram-apps-sdk/1-x/components/init-data.md)                                                |
| `useInvoice`         | `withInvoice`         | [Invoice](../telegram-apps-sdk/1-x/components/invoice.md)                                                   |
| `useMainButton`      | `withMainButton`      | [MainButton](../telegram-apps-sdk/1-x/components/main-button.md)                                            |
| `useMiniApp`         | `withMiniApp`         | [MiniApp](../telegram-apps-sdk/1-x/components/mini-app.md)                                                  |
| `usePopup`           | `withPopup`           | [Popup](../telegram-apps-sdk/1-x/components/popup.md)                                                       |
| `useQRScanner`       | `withQRScanner`       | [QRScanner](../telegram-apps-sdk/1-x/components/qr-scanner.md)                                              |
| `useSettingsButton`  | `withSettingsButton`  | [SettingsButton](../telegram-apps-sdk/1-x/components/settings-button.md)                                    |
| `useSwipeBehavior`   | `withSwipeBehavior`   | [SwipeBehavior](../telegram-apps-sdk/1-x/components/swipe-behavior.md)                                      |
| `useThemeParams`     | `withThemeParams`     | [ThemeParams](../telegram-apps-sdk/1-x/components/theme-params.md)                                          |
| `useUtils`           | `withUtils`           | [Utils](../telegram-apps-sdk/1-x/components/utils.md)                                                       |
| `useViewport`        | `withViewport`        | [Viewport](../telegram-apps-sdk/1-x/components/viewport.md) или `undefined`.                |

## Шаблон

Мы уже создали [шаблон](https://github.com/Telegram-Mini-Apps/solidjs-template) для Solid JS, который использует текущий пакет, поэтому вы можете его использовать.
