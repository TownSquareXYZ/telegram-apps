---
outline:
  - 2
  - 3
---

# Компоненты

## Init

Согласно структуре этого пакета, разработчик имеет полный контроль над его жизненным циклом,
включая процесс инициализации. Это означает, что для использования разработчиком не предусмотрено  предварительно инициализированных глобальных компонентов. Разработчик должен создавать компоненты самостоятельно.

Чтобы упростить работу разработчика, в пакет включены специальные функции с префиксом `init`. Эти функции возвращают кортеж, содержащий экземпляр инициализированного компонента
и функцию очистки, удаляющую все side-эффекты, созданные функцией init.

Например:

```typescript
import { initBackButton, initMainButton } from '@telegram-apps/sdk';

const [mb, cleanupMb] = initMainButton();
const [bb, cleanupBb] = initBackButton();

// Клик на кнопке MainButton скрывает ее и показывает кнопку BackButton.
mb.on('click', () => {
  mb.hide();
  bb.show();
});

// Клик на кнопке BackButton скрывает ее и показывает кнопку MainButton.
bb.on('click', () => {
  mb.show();
  bb.hide();
});

// Настройка MainButton.
mb
  .setBgColor('#ff0000')
  .setTextColor('#ffffff')
  .setText('Expand')
  .enable()
  .show();

// Когда нам больше не нужны BackButton и MainButton, мы можем 
// выполнить очистку. После вызова очистки инициализированный 
// компонент не будет получать никаких событий.
cleanupMb();
cleanupBb();
```

:::info

Обратите внимание, что некоторые компоненты не могут быть инстанцированы синхронно, пока о них нет локальной информации. Изучите документацию по каждому компоненту, чтобы узнать больше о процессе его инициализации.

:::

## События

Экземпляры компонентов используют общий способ прослушивания событий с помощью методов `on` и `off`.
Вот пример с компонентом `BackButton`:

```typescript
import { initBackButton } from '@telegram-apps/sdk';

const [bb] = initBackButton();

// Клик на кнопке BackButton скрывает ее и показывает кнопку MainButton.
bb.on('click', () => {
  console.log('BackButton clicked.');
});
```

Список поддерживаемых событий можно найти в документации соответствующих компонентов.

## Поддержка методов

Почти каждый компонент может проверить, поддерживается ли его метод текущей версией мини-приложения или нет. Чтобы проверить, поддерживаются ли те или иные методы, разработчику следует использовать функцию экземпляра компонента
`supports()`. Например:

```typescript
import { BackButton } from '@telegram-apps/sdk';

let bb = new BackButton('6.0', ...);
bb.supports('show'); // false

bb = new BackButton('6.3', ...);
bb.supports('hide'); // true
```

Некоторые компоненты поддерживают дополнительный метод `supportsParam`, который позволяет проверить, поддерживается ли <ins>параметр</ins> метода:

```typescript
import { Utils } from '@telegram-apps/sdk';

let utils = new Utils('6.0', ...);
utils.supportsParam('openLink.tryInstantView'); // false

utils = new Utils('6.10', ...);
utils.supportsParam('openLink.tryInstantView'); // true
```

::: tip

Рекомендуется использовать эту функциональность перед вызовом метода какого-либо компонента, чтобы быть уверенным в его корректной работе. Список поддерживаемых методов для компонентов описан в документации
по каждому компоненту.

:::
