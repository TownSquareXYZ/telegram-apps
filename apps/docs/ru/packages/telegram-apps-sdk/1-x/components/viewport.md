# `Viewport`

Реализует в мини-приложении Telegram функциональность [области просмотра](../../../../platform/viewport.md).

## Инициализация

Для инициализации компонента используйте функцию `initViewport`:

```typescript
import { initViewport } from '@telegram-apps/sdk';

const [viewport] = initViewport();  
```

::: info

Поскольку область просмотра не может быть создана синхронно, эта функция возвращает промис в качестве первого значения в кортеже, которое будет разрешено при извлечении фактического состояния области просмотра.

:::

## Размерность

Приложение может отображать только верхнюю часть мини-приложения, при этом нижняя часть останется за пределами области экрана. Из этой позиции пользователь может "вытянуть" мини-приложение на максимальную высоту, в то время как разработчик может сделать то же самое, вызвав метод `expand` (используйте свойство `isExpanded`, чтобы получить текущее состояние расширения):

```typescript
const [viewport] = initViewport();

const vp = await viewport;

if (!vp.isExpanded) {
    vp.expand(); // will expand the Mini App, if it's not
}
```

По мере изменения положения мини-приложения текущее значение высоты видимой области будет обновляться в реальном времени.

:::info
Обратите внимание, что частота обновления этого значения (`height`) недостаточна для плавного следования за нижней границей окна. Его не следует использовать для закрепления элементов интерфейса в нижней части видимой области. Для этой цели более целесообразно использовать значение поля `stableHeight`.
:::

## Запрос актуальных данных

Чтобы получить актуальную информацию об области просмотра, разработчик может использовать функцию `requestViewport`:

```typescript
import {requestViewport} from '@telegram-apps/sdk';

requestViewport().then((data) => {
    // Output:
    // { height: 122, isExpanded: false, width: 375, isStateStable: true }
    console.log(data);
});
```

## События

Список событий, которые можно [отследить](#events):

| Событие               | Обработчик                        | Срабатывает, когда               |
| --------------------- | --------------------------------- | -------------------------------- |
| `change`              | `() => void`                      | Что-то в компоненте изменилось   |
| `change:height`       | `(height: number) => void`        | Изменено свойство `height`       |
| `change:isExpanded`   | `(isExpanded: boolean) => void`   | Изменено свойство `isExpanded`   |
| `change:stableHeight` | `(stableHeight: boolean) => void` | Изменено свойство `stableHeight` |
| `change:width`        | `(width: boolean) => void`        | Изменено свойство `width`        |
